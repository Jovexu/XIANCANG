import{_ as a,c as e,w as t,a as l,g as s,n as o,m as n,b as c,p as i,q as d,i as r,o as u,e as p,h as f,j as _,S as m,I as h,A as g,x as y,t as D}from"./index-DC65vmE-.js";const b=a({data:()=>({formData:{from_port:"",to_port:"",price:"",container_type:"",container_quantity:"",shipping_company:"",closing_date:"",eta:"",valid_until:"",submitter_contact:""},containerTypes:["20GP","40GP","40HQ","45HQ","20RF","40RF","SOC","OT"],today:(new Date).toISOString().split("T")[0]}),onShow(){this.checkLogin()},methods:{checkLogin(){if(s("token")){const a=s("userInfo");a&&a.phone&&(this.formData.submitter_contact=a.phone)}else l({title:"è¯·å…ˆç™»å½•",icon:"none"}),setTimeout(()=>{o({url:"/pages/login/login"})},1500)},onTypeChange(a){this.formData.container_type=this.containerTypes[a.detail.value]},onDateChange(a,e){this.formData[a]=e.detail.value},handleSubmit(){const a=[{key:"from_port",name:"èµ·è¿æ¸¯"},{key:"to_port",name:"ç›®çš„æ¸¯"},{key:"shipping_company",name:"èˆ¹å…¬å¸"},{key:"container_type",name:"æŸœå‹"},{key:"container_quantity",name:"æŸœé‡"},{key:"price",name:"è¿ä»·"},{key:"closing_date",name:"æˆªå…³æ—¥æœŸ"},{key:"eta",name:"é¢„è®¡åˆ°æ¸¯æ—¥æœŸ"},{key:"valid_until",name:"æœ‰æ•ˆæœŸ"},{key:"submitter_contact",name:"è”ç³»æ–¹å¼"}];for(const t of a)if(!this.formData[t.key])return void l({title:`è¯·å¡«å†™${t.name}`,icon:"none"});const e=s("token");e?(n({title:"å‘å¸ƒä¸­..."}),c({url:"/api/publish",method:"POST",header:{Authorization:`Bearer ${e}`},data:this.formData,success:a=>{i(),a.data.success?(l({title:"å‘å¸ƒæˆåŠŸ",icon:"success"}),setTimeout(()=>{this.resetForm(),d({url:"/pages/index/index"})},1500)):l({title:a.data.message||"å‘å¸ƒå¤±è´¥",icon:"none"})},fail:()=>{i(),l({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·é‡è¯•",icon:"none"})}})):o({url:"/pages/login/login"})},resetForm(){this.formData={from_port:"",to_port:"",price:"",container_type:"",container_quantity:"",shipping_company:"",closing_date:"",eta:"",valid_until:"",submitter_contact:""}}}},[["render",function(a,l,s,o,n,c){const i=f,d=r,b=h,k=g,V=m;return u(),e(d,{class:"publish-container"},{default:t(()=>[p(d,{class:"header"},{default:t(()=>[p(d,{class:"header-content"},{default:t(()=>[p(i,{class:"header-title"},{default:t(()=>[_("å‘å¸ƒèˆ±ä½")]),_:1}),p(i,{class:"header-subtitle"},{default:t(()=>[_("åˆ†äº«æ‚¨çš„ç°èˆ±èµ„æºï¼Œå¿«é€ŸåŒ¹é…éœ€æ±‚")]),_:1})]),_:1})]),_:1}),p(V,{"scroll-y":"",class:"form-scroll"},{default:t(()=>[p(d,{class:"form-card"},{default:t(()=>[p(d,{class:"section"},{default:t(()=>[p(d,{class:"section-header"},{default:t(()=>[p(i,{class:"section-icon"},{default:t(()=>[_("ğŸš¢")]),_:1}),p(i,{class:"section-title"},{default:t(()=>[_("èˆªçº¿ä¿¡æ¯")]),_:1})]),_:1}),p(d,{class:"route-inputs"},{default:t(()=>[p(d,{class:"input-group"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("èµ·è¿æ¸¯")]),_:1}),p(b,{class:"input",modelValue:n.formData.from_port,"onUpdate:modelValue":l[0]||(l[0]=a=>n.formData.from_port=a),placeholder:"å¦‚: ä¸Šæµ·","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),p(d,{class:"route-arrow"},{default:t(()=>[_("â†’")]),_:1}),p(d,{class:"input-group"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("ç›®çš„æ¸¯")]),_:1}),p(b,{class:"input",modelValue:n.formData.to_port,"onUpdate:modelValue":l[1]||(l[1]=a=>n.formData.to_port=a),placeholder:"å¦‚: æ´›æ‰çŸ¶","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),p(d,{class:"input-group mt-md"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("èˆ¹å…¬å¸")]),_:1}),p(b,{class:"input",modelValue:n.formData.shipping_company,"onUpdate:modelValue":l[2]||(l[2]=a=>n.formData.shipping_company=a),placeholder:"å¦‚: COSCO, MAERSK","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),p(d,{class:"divider"}),p(d,{class:"section"},{default:t(()=>[p(d,{class:"section-header"},{default:t(()=>[p(i,{class:"section-icon"},{default:t(()=>[_("ğŸ“¦")]),_:1}),p(i,{class:"section-title"},{default:t(()=>[_("èˆ±ä½è¯¦æƒ…")]),_:1})]),_:1}),p(d,{class:"row"},{default:t(()=>[p(d,{class:"input-group half"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("æŸœå‹")]),_:1}),p(k,{mode:"selector",range:n.containerTypes,onChange:c.onTypeChange,class:"picker-container"},{default:t(()=>[p(d,{class:y(["picker-content",{active:n.formData.container_type}])},{default:t(()=>[_(D(n.formData.container_type||"è¯·é€‰æ‹©")+" ",1),p(i,{class:"picker-arrow"},{default:t(()=>[_("â–¼")]),_:1})]),_:1},8,["class"])]),_:1},8,["range","onChange"])]),_:1}),p(d,{class:"input-group half"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("æŸœé‡")]),_:1}),p(b,{class:"input",type:"number",modelValue:n.formData.container_quantity,"onUpdate:modelValue":l[3]||(l[3]=a=>n.formData.container_quantity=a),placeholder:"æ•°é‡","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),p(d,{class:"input-group mt-md"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("è¿ä»· (USD)")]),_:1}),p(b,{class:"input price-input",type:"digit",modelValue:n.formData.price,"onUpdate:modelValue":l[4]||(l[4]=a=>n.formData.price=a),placeholder:"0.00","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),p(d,{class:"divider"}),p(d,{class:"section"},{default:t(()=>[p(d,{class:"section-header"},{default:t(()=>[p(i,{class:"section-icon"},{default:t(()=>[_("ğŸ“…")]),_:1}),p(i,{class:"section-title"},{default:t(()=>[_("æ—¶é—´å®‰æ’")]),_:1})]),_:1}),p(d,{class:"input-group"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("æˆªå…³æ—¥æœŸ")]),_:1}),p(k,{mode:"date",start:n.today,onChange:l[5]||(l[5]=a=>c.onDateChange("closing_date",a))},{default:t(()=>[p(d,{class:y(["picker-content full",{active:n.formData.closing_date}])},{default:t(()=>[_(D(n.formData.closing_date||"è¯·é€‰æ‹©æˆªå…³æ—¥æœŸ")+" ",1),p(i,{class:"calendar-icon"},{default:t(()=>[_("ğŸ“…")]),_:1})]),_:1},8,["class"])]),_:1},8,["start"])]),_:1}),p(d,{class:"input-group mt-md"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("é¢„è®¡åˆ°æ¸¯ (ETA)")]),_:1}),p(k,{mode:"date",start:n.today,onChange:l[6]||(l[6]=a=>c.onDateChange("eta",a))},{default:t(()=>[p(d,{class:y(["picker-content full",{active:n.formData.eta}])},{default:t(()=>[_(D(n.formData.eta||"è¯·é€‰æ‹©é¢„è®¡åˆ°æ¸¯æ—¥æœŸ")+" ",1),p(i,{class:"calendar-icon"},{default:t(()=>[_("ğŸ“…")]),_:1})]),_:1},8,["class"])]),_:1},8,["start"])]),_:1}),p(d,{class:"input-group mt-md"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("è¿ä»·æœ‰æ•ˆæœŸè‡³")]),_:1}),p(k,{mode:"date",start:n.today,onChange:l[7]||(l[7]=a=>c.onDateChange("valid_until",a))},{default:t(()=>[p(d,{class:y(["picker-content full",{active:n.formData.valid_until}])},{default:t(()=>[_(D(n.formData.valid_until||"è¯·é€‰æ‹©æœ‰æ•ˆæœŸ")+" ",1),p(i,{class:"calendar-icon"},{default:t(()=>[_("ğŸ“…")]),_:1})]),_:1},8,["class"])]),_:1},8,["start"])]),_:1})]),_:1}),p(d,{class:"divider"}),p(d,{class:"section"},{default:t(()=>[p(d,{class:"section-header"},{default:t(()=>[p(i,{class:"section-icon"},{default:t(()=>[_("ğŸ“±")]),_:1}),p(i,{class:"section-title"},{default:t(()=>[_("è”ç³»æ–¹å¼")]),_:1})]),_:1}),p(d,{class:"input-group"},{default:t(()=>[p(i,{class:"label"},{default:t(()=>[_("è”ç³»ç”µè¯/å¾®ä¿¡")]),_:1}),p(b,{class:"input",modelValue:n.formData.submitter_contact,"onUpdate:modelValue":l[8]||(l[8]=a=>n.formData.submitter_contact=a),placeholder:"è¯·å¡«å†™æ‚¨çš„è”ç³»æ–¹å¼","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),p(d,{class:"action-area"},{default:t(()=>[p(d,{class:"submit-btn",onClick:c.handleSubmit},{default:t(()=>[p(i,{class:"btn-text"},{default:t(()=>[_("ç¡®è®¤å‘å¸ƒ")]),_:1})]),_:1},8,["onClick"]),p(i,{class:"tips"},{default:t(()=>[_("å‘å¸ƒå³ä»£è¡¨æ‚¨åŒæ„å¹³å°æœåŠ¡åè®®ï¼Œè¯·ç¡®ä¿ä¿¡æ¯çœŸå®æœ‰æ•ˆ")]),_:1})]),_:1})]),_:1}),p(d,{class:"bottom-spacer"})]),_:1})]),_:1})}],["__scopeId","data-v-0affe0da"]]);export{b as default};
