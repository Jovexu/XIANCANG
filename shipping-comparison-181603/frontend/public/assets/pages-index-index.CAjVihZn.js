import{_ as a,c as e,w as s,s as t,r as l,a as c,n as o,b as i,g as r,d,i as n,o as u,e as p,f,h as m,j as h,t as _,I as g,S as b,k,F as y,l as v}from"./index-DC65vmE-.js";const I=a({data:()=>({isLoggedIn:!1,userBalance:0,userEmail:"",fromPort:"",toPort:"",recentShipments:[],loading:!0}),onShow(){this.checkLoginStatus(),this.loadRecentShipments()},methods:{checkLoginStatus(){const a=r("token"),e=r("userInfo");a&&e?(this.isLoggedIn=!0,this.userBalance=e.balance||0,this.userEmail=e.email||"",this.loadUserInfo()):this.isLoggedIn=!1},loadUserInfo(){const a=r("token");a&&i({url:"/api/user/info",method:"GET",header:{Authorization:`Bearer ${a}`},success:a=>{a.data.success&&(this.userBalance=a.data.user.balance,this.userEmail=a.data.user.email,d("userInfo",a.data.user))}})},loadRecentShipments(){this.loading=!0,i({url:"/api/search",method:"GET",data:{page:1},success:a=>{this.loading=!1,a.data.success&&(this.recentShipments=(a.data.data||[]).slice(0,20))},fail:()=>{this.loading=!1,c({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})},handleSearch(){this.fromPort||this.toPort?o({url:`/pages/search/search?from_port=${this.fromPort}&to_port=${this.toPort}`}):c({title:"è¯·è¾“å…¥èµ·è¿æ¸¯æˆ–ç›®çš„æ¸¯",icon:"none"})},viewDetail(a){o({url:`/pages/detail/detail?id=${a}`})},goToLogin(){o({url:"/pages/login/login"})},goToRegister(){o({url:"/pages/register/register"})},goToPay(){if(!this.isLoggedIn)return c({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout(()=>{this.goToLogin()},1500);o({url:"/pages/pay/pay"})},handleLogout(){t({title:"ç¡®è®¤é€€å‡º",content:"æ‚¨ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",success:a=>{a.confirm&&(l("token"),l("userInfo"),this.isLoggedIn=!1,this.userBalance=0,this.userEmail="",c({title:"å·²é€€å‡ºç™»å½•",icon:"success"}))}})},formatDate:a=>a?a.split(" ")[0]:"-"}},[["render",function(a,t,l,c,o,i){const r=f,d=m,I=n,L=g,C=b;return u(),e(I,{class:"index-container"},{default:s(()=>[p(I,{class:"top-bar"},{default:s(()=>[p(I,{class:"header-left"},{default:s(()=>[p(r,{class:"logo",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_21/1757617076261-4900.jpg",mode:"aspectFit"}),p(I,{class:"title-group"},{default:s(()=>[p(d,{class:"title"},{default:s(()=>[h("å›½é™…æµ·è¿å®æ—¶ç°èˆ±")]),_:1}),p(d,{class:"subtitle"},{default:s(()=>[h("è®©æ‚¨é«˜æ•ˆåŒ¹é…æœ€ä¼˜è¿è´¹")]),_:1})]),_:1})]),_:1}),p(I,{class:"header-right"},{default:s(()=>[o.isLoggedIn?(u(),e(I,{key:0,class:"user-info-compact"},{default:s(()=>[p(I,{class:"balance-compact",onClick:i.goToPay},{default:s(()=>[p(d,{class:"balance-icon"},{default:s(()=>[h("ğŸ’°")]),_:1}),p(d,{class:"balance-value-compact"},{default:s(()=>[h(_(o.userBalance)+"ç§¯åˆ†",1)]),_:1})]),_:1},8,["onClick"]),p(d,{class:"logout-btn-compact",onClick:i.handleLogout},{default:s(()=>[h("é€€å‡º")]),_:1},8,["onClick"])]),_:1})):(u(),e(I,{key:1,class:"auth-buttons-compact"},{default:s(()=>[p(d,{class:"auth-btn-compact",onClick:i.goToLogin},{default:s(()=>[h("ç™»å½•")]),_:1},8,["onClick"]),p(d,{class:"auth-btn-compact",onClick:i.goToRegister},{default:s(()=>[h("æ³¨å†Œ")]),_:1},8,["onClick"])]),_:1}))]),_:1})]),_:1}),p(I,{class:"promo-section"},{default:s(()=>[p(r,{class:"promo-image",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_8/1757244970137-4859.jpg",mode:"aspectFill"}),p(r,{class:"promo-image",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_8/1757228551672-4395.jpg",mode:"aspectFill"})]),_:1}),p(I,{class:"search-section"},{default:s(()=>[p(d,{class:"search-title"},{default:s(()=>[h("æŸ¥è¯¢èˆ±ä½")]),_:1}),p(I,{class:"search-bar"},{default:s(()=>[p(L,{class:"search-input",modelValue:o.fromPort,"onUpdate:modelValue":t[0]||(t[0]=a=>o.fromPort=a),placeholder:"èµ·è¿æ¸¯","placeholder-class":"placeholder"},null,8,["modelValue"]),p(d,{class:"search-divider"},{default:s(()=>[h("â†’")]),_:1}),p(L,{class:"search-input",modelValue:o.toPort,"onUpdate:modelValue":t[1]||(t[1]=a=>o.toPort=a),placeholder:"ç›®çš„æ¸¯","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),p(I,{class:"search-btn",onClick:i.handleSearch},{default:s(()=>[p(d,{class:"search-text"},{default:s(()=>[h("æœç´¢èˆ±ä½")]),_:1})]),_:1},8,["onClick"])]),_:1}),p(I,{class:"recent-section"},{default:s(()=>[p(d,{class:"section-title"},{default:s(()=>[h("æœ€æ–°èˆ±ä½")]),_:1}),o.loading?(u(),e(I,{key:0,class:"loading-container"},{default:s(()=>[p(I,{class:"loading-spinner"}),p(d,{class:"loading-text"},{default:s(()=>[h("åŠ è½½ä¸­...")]),_:1})]),_:1})):o.recentShipments.length>0?(u(),e(C,{key:1,"scroll-y":"",class:"recent-scroll"},{default:s(()=>[(u(!0),k(y,null,v(o.recentShipments,a=>(u(),e(I,{key:a.id,class:"shipment-card",onClick:e=>i.viewDetail(a.id)},{default:s(()=>[p(I,{class:"card-header"},{default:s(()=>[p(I,{class:"route"},{default:s(()=>[p(d,{class:"port-name"},{default:s(()=>[h(_(a.from_port),1)]),_:2},1024),p(d,{class:"route-arrow"},{default:s(()=>[h("â†’")]),_:1}),p(d,{class:"port-name"},{default:s(()=>[h(_(a.to_port),1)]),_:2},1024)]),_:2},1024),p(I,{class:"price"},{default:s(()=>[p(d,{class:"price-currency"},{default:s(()=>[h("$")]),_:1}),p(d,{class:"price-value"},{default:s(()=>[h(_(a.price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(I,{class:"card-divider"}),p(C,{"scroll-x":"",class:"card-body-compact"},{default:s(()=>[p(I,{class:"compact-row"},{default:s(()=>[p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("æŸœå‹:")]),_:1}),p(d,{class:"compact-value"},{default:s(()=>[h(_(a.container_type),1)]),_:2},1024)]),_:2},1024),p(I,{class:"separator"},{default:s(()=>[h("|")]),_:1}),p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("æŸœé‡:")]),_:1}),p(d,{class:"compact-value"},{default:s(()=>[h(_(a.container_quantity),1)]),_:2},1024)]),_:2},1024),p(I,{class:"separator"},{default:s(()=>[h("|")]),_:1}),p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("èˆ¹å…¬å¸:")]),_:1}),p(d,{class:"compact-value company"},{default:s(()=>[h(_(a.shipping_company),1)]),_:2},1024)]),_:2},1024),p(I,{class:"separator"},{default:s(()=>[h("|")]),_:1}),p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("æˆªå…³:")]),_:1}),p(d,{class:"compact-value"},{default:s(()=>[h(_(i.formatDate(a.closing_date)),1)]),_:2},1024)]),_:2},1024),p(I,{class:"separator"},{default:s(()=>[h("|")]),_:1}),p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("åˆ°æ¸¯:")]),_:1}),p(d,{class:"compact-value"},{default:s(()=>[h(_(i.formatDate(a.eta)),1)]),_:2},1024)]),_:2},1024),p(I,{class:"separator"},{default:s(()=>[h("|")]),_:1}),p(I,{class:"compact-item"},{default:s(()=>[p(d,{class:"compact-label"},{default:s(()=>[h("è”ç³»æ–¹å¼:")]),_:1}),p(d,{class:"compact-value highlight"},{default:s(()=>[h("ç‚¹å‡»è§£é”ï¼ˆæ”¯ä»˜3ç§¯åˆ†ï¼‰")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(u(),e(I,{key:2,class:"empty-state"},{default:s(()=>[p(d,{class:"empty-icon"},{default:s(()=>[h("ğŸ“¦")]),_:1}),p(d,{class:"empty-text"},{default:s(()=>[h("æš‚æ— èˆ±ä½ä¿¡æ¯")]),_:1}),p(d,{class:"empty-hint"},{default:s(()=>[h("æ•¬è¯·æœŸå¾…æ›´å¤šèˆ±ä½æ•°æ®")]),_:1})]),_:1}))]),_:1})]),_:1})}],["__scopeId","data-v-e9b3b68e"]]);export{I as default};
