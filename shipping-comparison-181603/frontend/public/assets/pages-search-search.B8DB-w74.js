import{_ as a,c as t,w as e,g as l,m as s,b as o,p as i,a as n,d as c,n as d,s as r,i as f,o as u,e as p,u as _,I as h,h as m,j as x,S as g,k as y,F as k,l as C,x as w,t as P,v as b}from"./index-DC65vmE-.js";const E=a({data:()=>({fromPort:"",toPort:"",shipmentList:[],currentPage:1,totalPages:1,loading:!1,hasMore:!0,showContactModal:!1,contactInfo:"",showExampleData:!1,exampleData:[{id:"example-001",from_port:"ä¸Šæµ·",to_port:"æ´›æ‰çŸ¶",price:1200,container_type:"40HQ",container_quantity:5,shipping_company:"ä¸­è¿œæµ·è¿",closing_date:"2025-12-20",eta:"2026-01-10",valid_until:"2025-12-25",isExample:!0},{id:"example-002",from_port:"æ·±åœ³",to_port:"çº½çº¦",price:1580,container_type:"40GP",container_quantity:3,shipping_company:"é©¬å£«åŸº",closing_date:"2025-12-22",eta:"2026-01-15",valid_until:"2025-12-28",isExample:!0},{id:"example-003",from_port:"å®æ³¢",to_port:"é¹¿ç‰¹ä¸¹",price:2100,container_type:"20GP",container_quantity:10,shipping_company:"è¾¾é£žè½®èˆ¹",closing_date:"2025-12-18",eta:"2026-01-20",valid_until:"2025-12-23",isExample:!0},{id:"example-004",from_port:"é’å²›",to_port:"æ±‰å ¡",price:1950,container_type:"40HQ",container_quantity:8,shipping_company:"èµ«ä¼¯ç½—ç‰¹",closing_date:"2025-12-25",eta:"2026-01-25",valid_until:"2025-12-30",isExample:!0},{id:"example-005",from_port:"å¤©æ´¥",to_port:"æ‚‰å°¼",price:1380,container_type:"20RF",container_quantity:2,shipping_company:"ä¸œæ–¹æµ·å¤–",closing_date:"2025-12-19",eta:"2026-01-08",valid_until:"2025-12-24",isExample:!0}]}),onLoad(a){a.from_port&&(this.fromPort=a.from_port),a.to_port&&(this.toPort=a.to_port),(this.fromPort||this.toPort)&&this.handleSearch()},methods:{handleSearch(){this.currentPage=1,this.shipmentList=[],this.hasMore=!0,this.showExampleData=!1,this.loadData()},loadData(){this.loading||(this.loading=!0,o({url:"/api/search",method:"GET",data:{from_port:this.fromPort,to_port:this.toPort,page:this.currentPage},success:a=>{if(this.loading=!1,a.data.success){const t=a.data.data||[];this.shipmentList=[...this.shipmentList,...t],this.totalPages=a.data.totalPages||1,this.hasMore=this.currentPage<this.totalPages}else n({title:a.data.message||"æœç´¢å¤±è´¥",icon:"none"})},fail:()=>{this.loading=!1,n({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}}))},loadMore(){!this.hasMore||this.loading||this.showExampleData||(this.currentPage++,this.loadData())},loadExampleData(){this.shipmentList=[...this.exampleData],this.showExampleData=!0,this.hasMore=!1,n({title:"å·²åŠ è½½èŒƒä¾‹æ•°æ®",icon:"success",duration:1500})},closeExampleData(){this.shipmentList=[],this.showExampleData=!1,this.fromPort="",this.toPort=""},handleBook(a){if(a.isExample)return void n({title:"èŒƒä¾‹æ•°æ®ä¸æ”¯æŒè®¢èˆ±",icon:"none"});if(!l("token"))return n({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout(()=>{d({url:"/pages/login/login"})},1500);r({title:"ç¡®è®¤è®¢èˆ±",content:"è§£é”è”ç³»æ–¹å¼éœ€æ”¯ä»˜3ç§¯åˆ†ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ",success:t=>{t.confirm&&this.unlockContact(a.id)}})},unlockContact(a){const t=l("token");s({title:"è§£é”ä¸­..."}),o({url:"/api/pay",method:"POST",header:{Authorization:`Bearer ${t}`},data:{shipment_id:a},success:a=>{if(i(),a.data.success){this.contactInfo=a.data.contact,this.showContactModal=!0;const t=l("userInfo");t&&void 0!==a.data.newBalance&&(t.balance=a.data.newBalance,c("userInfo",t))}else n({title:a.data.message||"è§£é”å¤±è´¥",icon:"none"})},fail:()=>{i(),n({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}})},closeModal(){this.showContactModal=!1,this.contactInfo=""},formatDate:a=>a?a.split(" ")[0]:"-"}},[["render",function(a,l,s,o,i,n){const c=h,d=m,r=f,E=g;return u(),t(r,{class:"search-container"},{default:e(()=>[p(r,{class:"search-header"},{default:e(()=>[p(r,{class:"search-bar"},{default:e(()=>[p(c,{class:"search-input",modelValue:i.fromPort,"onUpdate:modelValue":l[0]||(l[0]=a=>i.fromPort=a),placeholder:"èµ·è¿æ¸¯","placeholder-class":"placeholder",onConfirm:n.handleSearch},null,8,["modelValue","onConfirm"]),p(d,{class:"search-arrow"},{default:e(()=>[x("â†’")]),_:1}),p(c,{class:"search-input",modelValue:i.toPort,"onUpdate:modelValue":l[1]||(l[1]=a=>i.toPort=a),placeholder:"ç›®çš„æ¸¯","placeholder-class":"placeholder",onConfirm:n.handleSearch},null,8,["modelValue","onConfirm"]),p(r,{class:"search-btn",onClick:n.handleSearch},{default:e(()=>[p(d,{class:"search-icon"},{default:e(()=>[x("ðŸ”")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),p(E,{"scroll-y":"",class:"result-scroll",onScrolltolower:n.loadMore},{default:e(()=>[i.loading&&0===i.shipmentList.length?(u(),t(r,{key:0,class:"loading-container"},{default:e(()=>[p(d,{class:"loading-spinner"}),p(d,{class:"loading-text"},{default:e(()=>[x("æœç´¢ä¸­...")]),_:1})]),_:1})):0!==i.shipmentList.length||i.showExampleData?(u(),t(r,{key:2,class:"shipment-list"},{default:e(()=>[i.showExampleData?(u(),t(r,{key:0,class:"example-banner"},{default:e(()=>[p(d,{class:"banner-icon"},{default:e(()=>[x("ðŸ’¡")]),_:1}),p(d,{class:"banner-text"},{default:e(()=>[x("ä»¥ä¸‹ä¸ºç³»ç»ŸèŒƒä¾‹æ•°æ®ï¼Œä»…ä¾›å‚è€ƒ")]),_:1}),p(r,{class:"banner-close",onClick:n.closeExampleData},{default:e(()=>[p(d,{class:"close-text"},{default:e(()=>[x("Ã—")]),_:1})]),_:1},8,["onClick"])]),_:1})):_("",!0),(u(!0),y(k,null,C(i.shipmentList,a=>(u(),t(r,{key:a.id,class:w(["shipment-card",{"example-card":a.isExample}])},{default:e(()=>[a.isExample?(u(),t(r,{key:0,class:"example-tag"},{default:e(()=>[p(d,{class:"tag-text"},{default:e(()=>[x("èŒƒä¾‹")]),_:1})]),_:1})):_("",!0),p(r,{class:"card-header"},{default:e(()=>[p(r,{class:"route-info"},{default:e(()=>[p(d,{class:"port-name"},{default:e(()=>[x(P(a.from_port),1)]),_:2},1024),p(d,{class:"route-arrow"},{default:e(()=>[x("â†’")]),_:1}),p(d,{class:"port-name"},{default:e(()=>[x(P(a.to_port),1)]),_:2},1024)]),_:2},1024),p(r,{class:"price-tag"},{default:e(()=>[p(d,{class:"price-currency"},{default:e(()=>[x("$")]),_:1}),p(d,{class:"price-value"},{default:e(()=>[x(P(a.price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(r,{class:"card-divider"}),p(r,{class:"card-body"},{default:e(()=>[p(r,{class:"info-row"},{default:e(()=>[p(r,{class:"info-item"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("æŸœåž‹")]),_:1}),p(d,{class:"info-value"},{default:e(()=>[x(P(a.container_type),1)]),_:2},1024)]),_:2},1024),p(r,{class:"info-item"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("æŸœé‡")]),_:1}),p(d,{class:"info-value"},{default:e(()=>[x(P(a.container_quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(r,{class:"info-row"},{default:e(()=>[p(r,{class:"info-item full-width"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("èˆ¹å…¬å¸")]),_:1}),p(d,{class:"info-value company"},{default:e(()=>[x(P(a.shipping_company),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(r,{class:"info-row"},{default:e(()=>[p(r,{class:"info-item"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("æˆªå…³æ—¥æœŸ")]),_:1}),p(d,{class:"info-value"},{default:e(()=>[x(P(n.formatDate(a.closing_date)),1)]),_:2},1024)]),_:2},1024),p(r,{class:"info-item"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("é¢„è®¡åˆ°æ¸¯")]),_:1}),p(d,{class:"info-value"},{default:e(()=>[x(P(n.formatDate(a.eta)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(r,{class:"info-row"},{default:e(()=>[p(r,{class:"info-item full-width"},{default:e(()=>[p(d,{class:"info-label"},{default:e(()=>[x("è¿è´¹æœ‰æ•ˆæœŸ")]),_:1}),p(d,{class:"info-value"},{default:e(()=>[x(P(n.formatDate(a.valid_until)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),p(r,{class:"card-footer"},{default:e(()=>[p(r,{class:w(["book-btn",{disabled:a.isExample}]),onClick:t=>n.handleBook(a)},{default:e(()=>[p(d,{class:"book-text"},{default:e(()=>[x(P(a.isExample?"èŒƒä¾‹æ•°æ®ï¼ˆä¸å¯è®¢èˆ±ï¼‰":"è®¢èˆ±ç¡®è®¤ï¼ˆ3ç§¯åˆ†ï¼‰"),1)]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})):(u(),t(r,{key:1,class:"empty-container"},{default:e(()=>[p(d,{class:"empty-icon"},{default:e(()=>[x("â›´ï¸")]),_:1}),p(d,{class:"empty-text"},{default:e(()=>[x("æš‚æ— èˆ±ä½ä¿¡æ¯")]),_:1}),p(d,{class:"empty-hint"},{default:e(()=>[x("è¯·å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶")]),_:1}),p(r,{class:"example-btn",onClick:n.loadExampleData},{default:e(()=>[p(d,{class:"example-btn-text"},{default:e(()=>[x("æŸ¥çœ‹èŒƒä¾‹æ•°æ®")]),_:1})]),_:1},8,["onClick"])]),_:1})),!i.hasMore||i.loading||i.showExampleData?_("",!0):(u(),t(r,{key:3,class:"load-more",onClick:n.loadMore},{default:e(()=>[p(d,{class:"load-more-text"},{default:e(()=>[x("åŠ è½½æ›´å¤š")]),_:1})]),_:1},8,["onClick"])),!i.hasMore&&i.shipmentList.length>0&&!i.showExampleData?(u(),t(r,{key:4,class:"no-more"},{default:e(()=>[p(d,{class:"no-more-text"},{default:e(()=>[x("å·²æ˜¾ç¤ºå…¨éƒ¨ç»“æžœ")]),_:1})]),_:1})):_("",!0)]),_:1},8,["onScrolltolower"]),i.showContactModal?(u(),t(r,{key:0,class:"modal-overlay",onClick:n.closeModal},{default:e(()=>[p(r,{class:"modal-content",onClick:l[2]||(l[2]=b(()=>{},["stop"]))},{default:e(()=>[p(r,{class:"modal-header"},{default:e(()=>[p(d,{class:"modal-title"},{default:e(()=>[x("è”ç³»æ–¹å¼")]),_:1}),p(r,{class:"modal-close",onClick:n.closeModal},{default:e(()=>[p(d,{class:"close-icon"},{default:e(()=>[x("Ã—")]),_:1})]),_:1},8,["onClick"])]),_:1}),p(r,{class:"modal-body"},{default:e(()=>[p(d,{class:"contact-info"},{default:e(()=>[x(P(i.contactInfo),1)]),_:1})]),_:1}),p(r,{class:"modal-footer"},{default:e(()=>[p(r,{class:"modal-btn",onClick:n.closeModal},{default:e(()=>[p(d,{class:"modal-btn-text"},{default:e(()=>[x("å…³é—­")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onClick"])):_("",!0)]),_:1})}],["__scopeId","data-v-76ade993"]]);export{E as default};
