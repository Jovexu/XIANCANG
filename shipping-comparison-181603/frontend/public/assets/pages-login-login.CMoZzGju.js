import{_ as a,c as e,w as s,g as l,a as t,m as o,b as c,p as n,n as d,d as i,q as u,i as r,o as m,e as f,u as p,f as h,h as _,j as g,I as y,t as b,v as k}from"./index-DC65vmE-.js";const P=a({data:()=>({formData:{account:"",password:""},userBalance:0,showPaymentModal:!1}),onLoad(){this.fetchBalance()},methods:{handleLogin(){const{account:a,password:e}=this.formData;a?e?(o({title:"ç™»å½•ä¸­..."}),c({url:"/api/login",method:"POST",data:{account:a,password:e},success:a=>{n(),a.data.success?(i("token",a.data.token),i("userInfo",a.data.user),t({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout(()=>{u({url:"/pages/index/index"})},1500)):t({title:a.data.message||"ç™»å½•å¤±è´¥",icon:"none"})},fail:()=>{n(),t({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):t({title:"è¯·è¾“å…¥å¯†ç ",icon:"none"}):t({title:"è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±",icon:"none"})},goToRegister(){d({url:"/pages/register/register"})},fetchBalance(){const a=l("token");a?c({url:"/api/getBalance",method:"GET",header:{Authorization:`Bearer ${a}`},success:a=>{a.data.success&&(this.userBalance=a.data.balance)},fail:()=>{console.error("è·å–ç§¯åˆ†ä½™é¢å¤±è´¥")}}):this.userBalance=0},showRechargePrompt(){l("token")?this.showPaymentModal=!0:t({title:"è¯·å…ˆç™»å½•",icon:"none"})},closePaymentModal(){this.showPaymentModal=!1},bindPayment(a){const e=l("token");e?(o({title:"ç»‘å®šä¸­..."}),c({url:"/api/requestPaymentBinding",method:"POST",header:{Authorization:`Bearer ${e}`},data:{paymentType:a},success:a=>{n(),a.data.success?(t({title:a.data.message||"ç»‘å®šæˆåŠŸ",icon:"success"}),this.closePaymentModal(),setTimeout(()=>{d({url:"/pages/pay/pay"})},1500)):t({title:a.data.message||"ç»‘å®šå¤±è´¥",icon:"none"})},fail:()=>{n(),t({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):t({title:"è¯·å…ˆç™»å½•",icon:"none"})}}},[["render",function(a,l,t,o,c,n){const d=h,i=_,u=r,P=y;return m(),e(u,{class:"login-container"},{default:s(()=>[f(u,{class:"header"},{default:s(()=>[f(d,{class:"logo",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_21/1757617076261-4900.jpg",mode:"aspectFit"}),f(i,{class:"header-title"},{default:s(()=>[g("å›½é™…æµ·è¿å®æ—¶ç°èˆ±")]),_:1}),f(i,{class:"header-subtitle"},{default:s(()=>[g("è®©æ‚¨é«˜æ•ˆåŒ¹é…æœ€ä¼˜è¿è´¹")]),_:1})]),_:1}),f(u,{class:"form-container"},{default:s(()=>[f(u,{class:"form-card"},{default:s(()=>[f(u,{class:"form-item"},{default:s(()=>[f(i,{class:"label"},{default:s(()=>[g("æ‰‹æœºå·/é‚®ç®±")]),_:1}),f(P,{class:"input",modelValue:c.formData.account,"onUpdate:modelValue":l[0]||(l[0]=a=>c.formData.account=a),placeholder:"è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),f(u,{class:"form-item"},{default:s(()=>[f(i,{class:"label"},{default:s(()=>[g("å¯†ç ")]),_:1}),f(P,{class:"input",modelValue:c.formData.password,"onUpdate:modelValue":l[1]||(l[1]=a=>c.formData.password=a),type:"password",password:"",placeholder:"è¯·è¾“å…¥å¯†ç ","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),f(u,{class:"login-btn",onClick:n.handleLogin},{default:s(()=>[f(i,{class:"login-text"},{default:s(()=>[g("ç™»å½•")]),_:1})]),_:1},8,["onClick"]),f(u,{class:"register-link"},{default:s(()=>[f(i,{class:"link-text"},{default:s(()=>[g("è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ")]),_:1}),f(i,{class:"link-btn",onClick:n.goToRegister},{default:s(()=>[g("ç«‹å³æ³¨å†Œ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),f(u,{class:"balance-section"},{default:s(()=>[f(u,{class:"balance-card"},{default:s(()=>[f(u,{class:"balance-info"},{default:s(()=>[f(i,{class:"balance-icon"},{default:s(()=>[g("ğŸ’°")]),_:1}),f(u,{class:"balance-content"},{default:s(()=>[f(i,{class:"balance-label"},{default:s(()=>[g("å½“å‰ç§¯åˆ†ä½™é¢")]),_:1}),f(i,{class:"balance-value"},{default:s(()=>[g(b(c.userBalance)+" ç§¯åˆ†",1)]),_:1})]),_:1})]),_:1}),f(u,{class:"recharge-btn",onClick:n.showRechargePrompt},{default:s(()=>[f(i,{class:"recharge-text"},{default:s(()=>[g("å……å€¼")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),f(u,{class:"decoration"},{default:s(()=>[f(d,{class:"bg-image",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_2/1757173681147-1967.jpg",mode:"aspectFill"})]),_:1}),c.showPaymentModal?(m(),e(u,{key:0,class:"modal-overlay",onClick:n.closePaymentModal},{default:s(()=>[f(u,{class:"modal-content",onClick:l[4]||(l[4]=k(()=>{},["stop"]))},{default:s(()=>[f(u,{class:"modal-header"},{default:s(()=>[f(i,{class:"modal-title"},{default:s(()=>[g("å……å€¼æç¤º")]),_:1}),f(u,{class:"modal-close",onClick:n.closePaymentModal},{default:s(()=>[f(i,{class:"close-icon"},{default:s(()=>[g("Ã—")]),_:1})]),_:1},8,["onClick"])]),_:1}),f(u,{class:"modal-body"},{default:s(()=>[f(i,{class:"modal-desc"},{default:s(()=>[g("è¯·å…ˆç»‘å®šæ”¯ä»˜æ–¹å¼åå†å……å€¼")]),_:1}),f(u,{class:"payment-options"},{default:s(()=>[f(u,{class:"payment-option",onClick:l[2]||(l[2]=a=>n.bindPayment("wechat"))},{default:s(()=>[f(i,{class:"payment-icon"},{default:s(()=>[g("ğŸ’š")]),_:1}),f(i,{class:"payment-name"},{default:s(()=>[g("ç»‘å®šå¾®ä¿¡æ”¯ä»˜")]),_:1})]),_:1}),f(u,{class:"payment-option",onClick:l[3]||(l[3]=a=>n.bindPayment("alipay"))},{default:s(()=>[f(i,{class:"payment-icon"},{default:s(()=>[g("ğŸ’™")]),_:1}),f(i,{class:"payment-name"},{default:s(()=>[g("ç»‘å®šæ”¯ä»˜å®")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onClick"])):p("",!0)]),_:1})}],["__scopeId","data-v-14e37ecf"]]);export{P as default};
