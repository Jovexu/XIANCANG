import{_ as e,c as a,w as l,g as s,a as t,m as o,b as n,p as c,n as i,i as d,o as r,e as u,u as f,f as m,h,j as p,S as _,I as g,t as y,v as b}from"./index-DC65vmE-.js";const k=e({data:()=>({formData:{phone:"",email:"",password:"",confirmPassword:""},showVerification:!1,verificationCode:"",userId:"",userBalance:0,showPaymentModal:!1}),onLoad(){this.fetchBalance()},methods:{validatePhone:e=>/^1[3-9]\d{9}$/.test(e),validateEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),handleRegister(){const{phone:e,email:a,password:l,confirmPassword:s}=this.formData;e&&a&&l&&s?this.validatePhone(e)?this.validateEmail(a)?l.length<6||l.length>20?t({title:"å¯†ç é•¿åº¦ä¸º6-20ä½",icon:"none"}):l===s?(o({title:"æ³¨å†Œä¸­..."}),n({url:"/api/register",method:"POST",data:{phone:e,email:a,password:l},success:e=>{c(),e.data.success?(this.userId=e.data.userId,this.showVerification=!0,t({title:"éªŒè¯ç å·²å‘é€",icon:"success"})):t({title:e.data.message||"æ³¨å†Œå¤±è´¥",icon:"none"})},fail:()=>{c(),t({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):t({title:"ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´",icon:"none"}):t({title:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",icon:"none"}):t({title:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·",icon:"none"}):t({title:"è¯·å¡«å†™å®Œæ•´ä¿¡æ¯",icon:"none"})},handleVerify(){this.verificationCode&&6===this.verificationCode.length?(o({title:"éªŒè¯ä¸­..."}),n({url:"/api/verify-email",method:"POST",data:{userId:this.userId,code:this.verificationCode},success:e=>{c(),e.data.success?(t({title:"æ³¨å†ŒæˆåŠŸ",icon:"success"}),setTimeout(()=>{i({url:"/pages/login/login"})},1500)):t({title:e.data.message||"éªŒè¯å¤±è´¥",icon:"none"})},fail:()=>{c(),t({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):t({title:"è¯·è¾“å…¥6ä½éªŒè¯ç ",icon:"none"})},resendCode(){this.handleRegister()},goToLogin(){i({url:"/pages/login/login"})},fetchBalance(){const e=s("token");e?n({url:"/api/getBalance",method:"GET",header:{Authorization:`Bearer ${e}`},success:e=>{e.data.success&&(this.userBalance=e.data.balance)},fail:()=>{console.error("è·å–ç§¯åˆ†ä½™é¢å¤±è´¥")}}):this.userBalance=0},showRechargePrompt(){if(!s("token"))return t({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout(()=>{i({url:"/pages/login/login"})},1500);this.showPaymentModal=!0},closePaymentModal(){this.showPaymentModal=!1},bindPayment(e){const a=s("token");a?(o({title:"ç»‘å®šä¸­..."}),n({url:"/api/requestPaymentBinding",method:"POST",header:{Authorization:`Bearer ${a}`},data:{paymentType:e},success:e=>{c(),e.data.success?(t({title:e.data.message||"ç»‘å®šæˆåŠŸ",icon:"success"}),this.closePaymentModal(),setTimeout(()=>{i({url:"/pages/pay/pay"})},1500)):t({title:e.data.message||"ç»‘å®šå¤±è´¥",icon:"none"})},fail:()=>{c(),t({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):t({title:"è¯·å…ˆç™»å½•",icon:"none"})}}},[["render",function(e,s,t,o,n,c){const i=m,k=h,v=d,C=g,w=_;return r(),a(v,{class:"register-container"},{default:l(()=>[u(v,{class:"header"},{default:l(()=>[u(i,{class:"logo",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_21/1757617076261-4900.jpg",mode:"aspectFit"}),u(k,{class:"header-title"},{default:l(()=>[p("å›½é™…æµ·è¿å®æ—¶ç°èˆ±")]),_:1}),u(k,{class:"header-subtitle"},{default:l(()=>[p("è®©æ‚¨é«˜æ•ˆåŒ¹é…æœ€ä¼˜è¿è´¹")]),_:1})]),_:1}),u(w,{"scroll-y":"",class:"form-scroll"},{default:l(()=>[u(v,{class:"form-container"},{default:l(()=>[n.showVerification?(r(),a(v,{key:1,class:"verification-content"},{default:l(()=>[u(v,{class:"verification-header"},{default:l(()=>[u(k,{class:"verification-title"},{default:l(()=>[p("é‚®ç®±éªŒè¯")]),_:1}),u(k,{class:"verification-desc"},{default:l(()=>[p("éªŒè¯ç å·²å‘é€è‡³ "+y(n.formData.email),1)]),_:1})]),_:1}),u(v,{class:"verification-form"},{default:l(()=>[u(v,{class:"form-item"},{default:l(()=>[u(k,{class:"label"},{default:l(()=>[p("éªŒè¯ç ")]),_:1}),u(C,{class:"input verification-input",modelValue:n.verificationCode,"onUpdate:modelValue":s[4]||(s[4]=e=>n.verificationCode=e),type:"number",maxlength:"6",placeholder:"è¯·è¾“å…¥6ä½éªŒè¯ç ","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),u(v,{class:"verify-btn",onClick:c.handleVerify},{default:l(()=>[u(k,{class:"verify-text"},{default:l(()=>[p("éªŒè¯å¹¶å®Œæˆæ³¨å†Œ")]),_:1})]),_:1},8,["onClick"]),u(v,{class:"resend-link"},{default:l(()=>[u(k,{class:"resend-text",onClick:c.resendCode},{default:l(()=>[p("é‡æ–°å‘é€éªŒè¯ç ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):(r(),a(v,{key:0,class:"form-content"},{default:l(()=>[u(v,{class:"form-item"},{default:l(()=>[u(k,{class:"label"},{default:l(()=>[p("æ‰‹æœºå·")]),_:1}),u(C,{class:"input",modelValue:n.formData.phone,"onUpdate:modelValue":s[0]||(s[0]=e=>n.formData.phone=e),type:"number",maxlength:"11",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),u(v,{class:"form-item"},{default:l(()=>[u(k,{class:"label"},{default:l(()=>[p("é‚®ç®±åœ°å€")]),_:1}),u(C,{class:"input",modelValue:n.formData.email,"onUpdate:modelValue":s[1]||(s[1]=e=>n.formData.email=e),type:"text",placeholder:"è¯·è¾“å…¥é‚®ç®±åœ°å€","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),u(v,{class:"form-item"},{default:l(()=>[u(k,{class:"label"},{default:l(()=>[p("å¯†ç ")]),_:1}),u(C,{class:"input",modelValue:n.formData.password,"onUpdate:modelValue":s[2]||(s[2]=e=>n.formData.password=e),type:"password",password:"",placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆ6-20ä½ï¼‰","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),u(v,{class:"form-item"},{default:l(()=>[u(k,{class:"label"},{default:l(()=>[p("ç¡®è®¤å¯†ç ")]),_:1}),u(C,{class:"input",modelValue:n.formData.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>n.formData.confirmPassword=e),type:"password",password:"",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),u(v,{class:"register-btn",onClick:c.handleRegister},{default:l(()=>[u(k,{class:"register-text"},{default:l(()=>[p("æ³¨å†Œ")]),_:1})]),_:1},8,["onClick"]),u(v,{class:"login-link"},{default:l(()=>[u(k,{class:"link-text"},{default:l(()=>[p("å·²æœ‰è´¦å·ï¼Ÿ")]),_:1}),u(k,{class:"link-btn",onClick:c.goToLogin},{default:l(()=>[p("ç«‹å³ç™»å½•")]),_:1},8,["onClick"])]),_:1})]),_:1})),u(v,{class:"balance-section"},{default:l(()=>[u(v,{class:"balance-info"},{default:l(()=>[u(k,{class:"balance-icon"},{default:l(()=>[p("ğŸ’°")]),_:1}),u(v,{class:"balance-content"},{default:l(()=>[u(k,{class:"balance-label"},{default:l(()=>[p("å½“å‰ç§¯åˆ†ä½™é¢")]),_:1}),u(k,{class:"balance-value"},{default:l(()=>[p(y(n.userBalance)+" ç§¯åˆ†",1)]),_:1})]),_:1})]),_:1}),u(v,{class:"recharge-btn",onClick:c.showRechargePrompt},{default:l(()=>[u(k,{class:"recharge-text"},{default:l(()=>[p("å……å€¼")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),n.showPaymentModal?(r(),a(v,{key:0,class:"modal-overlay",onClick:c.closePaymentModal},{default:l(()=>[u(v,{class:"modal-content",onClick:s[7]||(s[7]=b(()=>{},["stop"]))},{default:l(()=>[u(v,{class:"modal-header"},{default:l(()=>[u(k,{class:"modal-title"},{default:l(()=>[p("å……å€¼æç¤º")]),_:1}),u(v,{class:"modal-close",onClick:c.closePaymentModal},{default:l(()=>[u(k,{class:"close-icon"},{default:l(()=>[p("Ã—")]),_:1})]),_:1},8,["onClick"])]),_:1}),u(v,{class:"modal-body"},{default:l(()=>[u(k,{class:"modal-desc"},{default:l(()=>[p("è¯·å…ˆç»‘å®šæ”¯ä»˜æ–¹å¼åå†å……å€¼")]),_:1}),u(v,{class:"payment-options"},{default:l(()=>[u(v,{class:"payment-option",onClick:s[5]||(s[5]=e=>c.bindPayment("wechat"))},{default:l(()=>[u(k,{class:"payment-icon"},{default:l(()=>[p("ğŸ’š")]),_:1}),u(k,{class:"payment-name"},{default:l(()=>[p("ç»‘å®šå¾®ä¿¡æ”¯ä»˜")]),_:1})]),_:1}),u(v,{class:"payment-option",onClick:s[6]||(s[6]=e=>c.bindPayment("alipay"))},{default:l(()=>[u(k,{class:"payment-icon"},{default:l(()=>[p("ğŸ’™")]),_:1}),u(k,{class:"payment-name"},{default:l(()=>[p("ç»‘å®šæ”¯ä»˜å®")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onClick"])):f("",!0)]),_:1})}],["__scopeId","data-v-e6f8125c"]]);export{k as default};
