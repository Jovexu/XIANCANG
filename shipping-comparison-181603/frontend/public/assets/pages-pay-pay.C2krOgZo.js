import{_ as t,c as a,w as e,a as s,g as l,m as n,b as o,p as c,y as u,n as i,i as d,o as m,e as f,f as p,h as r,j as h,t as _,k as y,F as A,l as b,x as g,I as k}from"./index-DC65vmE-.js";const v=t({data:()=>({userBalance:0,amountOptions:[150,300,500,1e3,2e3,5e3],selectedAmount:150,customAmount:"",paymentMethod:"wechat",finalAmount:150}),onLoad(){this.loadUserInfo()},methods:{loadUserInfo(){const t=l("token");if(!t)return s({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout(()=>{i({url:"/pages/login/login"})},1500);o({url:"/api/user/info",method:"GET",header:{Authorization:`Bearer ${t}`},success:t=>{t.data.success&&(this.userBalance=t.data.user.balance)}})},selectAmount(t){this.selectedAmount=t,this.customAmount="",this.finalAmount=t},onCustomInput(t){const a=parseInt(t.detail.value)||0;this.selectedAmount=null,this.finalAmount=a},selectPaymentMethod(t){this.paymentMethod=t},handlePay(){if(this.finalAmount<150)return void s({title:"æœ€ä½å……å€¼150å…ƒ",icon:"none"});if(!this.paymentMethod)return void s({title:"è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼",icon:"none"});const t=l("token");t?(n({title:"æ”¯ä»˜ä¸­..."}),o({url:"/api/recharge",method:"POST",header:{Authorization:`Bearer ${t}`},data:{amount:this.finalAmount},success:t=>{c(),t.data.success?(this.userBalance=t.data.balance,s({title:"å……å€¼æˆåŠŸ",icon:"success"}),setTimeout(()=>{u()},1500)):s({title:t.data.message||"å……å€¼å¤±è´¥",icon:"none"})},fail:()=>{c(),s({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}})):s({title:"è¯·å…ˆç™»å½•",icon:"none"})}}},[["render",function(t,s,l,n,o,c){const u=p,i=r,v=d,I=k;return m(),a(v,{class:"pay-container"},{default:e(()=>[f(v,{class:"header"},{default:e(()=>[f(u,{class:"logo",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/batch_21/1757617076261-4900.jpg",mode:"aspectFit"}),f(i,{class:"header-title"},{default:e(()=>[h("ç§¯åˆ†å……å€¼")]),_:1}),f(i,{class:"header-subtitle"},{default:e(()=>[h("æœ€ä½å……å€¼150å…ƒï¼Œ1å…ƒ=1ç§¯åˆ†")]),_:1})]),_:1}),f(v,{class:"balance-card"},{default:e(()=>[f(v,{class:"balance-info"},{default:e(()=>[f(i,{class:"balance-label"},{default:e(()=>[h("å½“å‰ç§¯åˆ†ä½™é¢")]),_:1}),f(i,{class:"balance-value"},{default:e(()=>[h(_(o.userBalance),1)]),_:1})]),_:1})]),_:1}),f(v,{class:"amount-section"},{default:e(()=>[f(i,{class:"section-title"},{default:e(()=>[h("é€‰æ‹©å……å€¼é‡‘é¢")]),_:1}),f(v,{class:"amount-grid"},{default:e(()=>[(m(!0),y(A,null,b(o.amountOptions,t=>(m(),a(v,{key:t,class:g(["amount-item",{active:o.selectedAmount===t}]),onClick:a=>c.selectAmount(t)},{default:e(()=>[f(i,{class:"amount-text"},{default:e(()=>[h(_(t)+"å…ƒ",1)]),_:2},1024),f(i,{class:"amount-credits"},{default:e(()=>[h(_(t)+"ç§¯åˆ†",1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),f(v,{class:"custom-amount"},{default:e(()=>[f(i,{class:"custom-label"},{default:e(()=>[h("è‡ªå®šä¹‰é‡‘é¢")]),_:1}),f(I,{class:"custom-input",modelValue:o.customAmount,"onUpdate:modelValue":s[0]||(s[0]=t=>o.customAmount=t),type:"digit",placeholder:"æœ€ä½150å…ƒ","placeholder-class":"placeholder",onInput:c.onCustomInput},null,8,["modelValue","onInput"])]),_:1})]),_:1}),f(v,{class:"payment-section"},{default:e(()=>[f(i,{class:"section-title"},{default:e(()=>[h("é€‰æ‹©æ”¯ä»˜æ–¹å¼")]),_:1}),f(v,{class:"payment-methods"},{default:e(()=>[f(v,{class:g(["payment-item",{active:"wechat"===o.paymentMethod}]),onClick:s[1]||(s[1]=t=>c.selectPaymentMethod("wechat"))},{default:e(()=>[f(v,{class:"payment-icon"},{default:e(()=>[h("ğŸ’š")]),_:1}),f(i,{class:"payment-name"},{default:e(()=>[h("å¾®ä¿¡æ”¯ä»˜")]),_:1})]),_:1},8,["class"]),f(v,{class:g(["payment-item",{active:"alipay"===o.paymentMethod}]),onClick:s[2]||(s[2]=t=>c.selectPaymentMethod("alipay"))},{default:e(()=>[f(v,{class:"payment-icon"},{default:e(()=>[h("ğŸ’™")]),_:1}),f(i,{class:"payment-name"},{default:e(()=>[h("æ”¯ä»˜å®")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),f(v,{class:"pay-btn",onClick:c.handlePay},{default:e(()=>[f(i,{class:"pay-text"},{default:e(()=>[h("ç«‹å³æ”¯ä»˜ "+_(o.finalAmount)+"å…ƒ",1)]),_:1})]),_:1},8,["onClick"]),f(v,{class:"tips"},{default:e(()=>[f(i,{class:"tips-text"},{default:e(()=>[h("â€¢ å……å€¼çš„ç§¯åˆ†ç”¨äºè§£é”èˆ±ä½è”ç³»æ–¹å¼")]),_:1}),f(i,{class:"tips-text"},{default:e(()=>[h("â€¢ æ¯æ¬¡è§£é”éœ€æ”¯ä»˜3ç§¯åˆ†")]),_:1}),f(i,{class:"tips-text"},{default:e(()=>[h("â€¢ ç§¯åˆ†ä¸å¯æç°ï¼Œè¯·åˆç†å……å€¼")]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-24909955"]]);export{v as default};
