import{_ as a,c as t,w as l,y as s,z as e,a as c,g as o,m as n,b as i,p as d,d as f,n as u,i as _,o as r,u as m,e as h,h as p,j as k,t as b,v as y}from"./index-DC65vmE-.js";const g=a({data:()=>({shipmentId:"",shipment:null,loading:!0,isUnlocked:!1,showPayModal:!1}),onLoad(a){a.id?(this.shipmentId=a.id,this.loadShipmentDetail()):(this.loading=!1,c({title:"ç¼ºå°‘èˆ±ä½ID",icon:"none"}))},methods:{loadShipmentDetail(){this.loading=!0;const a=o("token");i({url:`/api/shipment/${this.shipmentId}`,method:"GET",header:a?{Authorization:`Bearer ${a}`}:{},success:a=>{this.loading=!1,a.data.success?(this.shipment=a.data.data,this.isUnlocked=a.data.data.isUnlocked||!1):c({title:a.data.message||"åŠ è½½å¤±è´¥",icon:"none"})},fail:()=>{this.loading=!1,c({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}})},handleUnlock(){if(!o("token"))return c({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout(()=>{u({url:"/pages/login/login"})},1500);this.showPayModal=!0},confirmPay(){const a=o("token");n({title:"æ”¯ä»˜ä¸­..."}),i({url:"/api/unlock-contact",method:"POST",header:{Authorization:`Bearer ${a}`},data:{shipment_id:this.shipmentId},success:a=>{if(d(),a.data.success){this.isUnlocked=!0,this.shipment.submitter_contact=a.data.contact,this.showPayModal=!1;const t=o("userInfo");t&&void 0!==a.data.newBalance&&(t.balance=a.data.newBalance,f("userInfo",t)),c({title:"è§£é”æˆåŠŸ",icon:"success"})}else c({title:a.data.message||"è§£é”å¤±è´¥",icon:"none"})},fail:()=>{d(),c({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åŽé‡è¯•",icon:"none"})}})},closeModal(){this.showPayModal=!1},copyContact(){this.shipment&&this.shipment.submitter_contact&&e({data:this.shipment.submitter_contact,success:()=>{c({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",icon:"success"})}})},formatDate:a=>a?a.split(" ")[0]:"-",goBack(){s({delta:1})}}},[["render",function(a,s,e,c,o,n){const i=_,d=p;return r(),t(i,{class:"detail-container"},{default:l(()=>[o.loading?(r(),t(i,{key:0,class:"loading-container"},{default:l(()=>[h(i,{class:"loading-spinner"}),h(d,{class:"loading-text"},{default:l(()=>[k("åŠ è½½ä¸­...")]),_:1})]),_:1})):o.shipment?(r(),t(i,{key:1,class:"detail-content"},{default:l(()=>[h(i,{class:"header-card"},{default:l(()=>[h(i,{class:"route-section"},{default:l(()=>[h(i,{class:"port-info"},{default:l(()=>[h(d,{class:"port-label"},{default:l(()=>[k("èµ·è¿æ¸¯")]),_:1}),h(d,{class:"port-name"},{default:l(()=>[k(b(o.shipment.from_port),1)]),_:1})]),_:1}),h(i,{class:"route-arrow"},{default:l(()=>[h(d,{class:"arrow-icon"},{default:l(()=>[k("â†’")]),_:1})]),_:1}),h(i,{class:"port-info"},{default:l(()=>[h(d,{class:"port-label"},{default:l(()=>[k("ç›®çš„æ¸¯")]),_:1}),h(d,{class:"port-name"},{default:l(()=>[k(b(o.shipment.to_port),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"price-section"},{default:l(()=>[h(d,{class:"price-label"},{default:l(()=>[k("è¿ä»·")]),_:1}),h(i,{class:"price-value"},{default:l(()=>[h(d,{class:"currency"},{default:l(()=>[k("$")]),_:1}),h(d,{class:"amount"},{default:l(()=>[k(b(o.shipment.price),1)]),_:1})]),_:1})]),_:1})]),_:1}),h(i,{class:"info-card"},{default:l(()=>[h(i,{class:"card-title"},{default:l(()=>[h(d,{class:"title-text"},{default:l(()=>[k("èˆ±ä½ä¿¡æ¯")]),_:1})]),_:1}),h(i,{class:"info-grid"},{default:l(()=>[h(i,{class:"info-item"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("ðŸ“¦")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("æŸœåž‹")]),_:1}),h(d,{class:"info-value"},{default:l(()=>[k(b(o.shipment.container_type),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"info-item"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("ðŸ”¢")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("æŸœé‡")]),_:1}),h(d,{class:"info-value"},{default:l(()=>[k(b(o.shipment.container_quantity),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"info-item full-width"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("ðŸš¢")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("èˆ¹å…¬å¸")]),_:1}),h(d,{class:"info-value company"},{default:l(()=>[k(b(o.shipment.shipping_company),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"info-item"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("ðŸ“…")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("æˆªå…³æ—¥æœŸ")]),_:1}),h(d,{class:"info-value"},{default:l(()=>[k(b(n.formatDate(o.shipment.closing_date)),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"info-item"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("ðŸ•’")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("é¢„è®¡åˆ°æ¸¯")]),_:1}),h(d,{class:"info-value"},{default:l(()=>[k(b(n.formatDate(o.shipment.eta)),1)]),_:1})]),_:1})]),_:1}),h(i,{class:"info-item full-width"},{default:l(()=>[h(i,{class:"info-icon"},{default:l(()=>[k("â°")]),_:1}),h(i,{class:"info-content"},{default:l(()=>[h(d,{class:"info-label"},{default:l(()=>[k("è¿è´¹æœ‰æ•ˆæœŸ")]),_:1}),h(d,{class:"info-value"},{default:l(()=>[k(b(n.formatDate(o.shipment.valid_until)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h(i,{class:"contact-card"},{default:l(()=>[h(i,{class:"card-title"},{default:l(()=>[h(d,{class:"title-text"},{default:l(()=>[k("è”ç³»æ–¹å¼")]),_:1})]),_:1}),o.isUnlocked?(r(),t(i,{key:1,class:"unlocked-section"},{default:l(()=>[h(i,{class:"unlock-icon"},{default:l(()=>[k("âœ…")]),_:1}),h(d,{class:"unlocked-text"},{default:l(()=>[k("å·²è§£é”")]),_:1}),h(i,{class:"contact-info"},{default:l(()=>[h(d,{class:"contact-label"},{default:l(()=>[k("è”ç³»æ–¹å¼ï¼š")]),_:1}),h(d,{class:"contact-value"},{default:l(()=>[k(b(o.shipment.submitter_contact),1)]),_:1})]),_:1}),h(i,{class:"copy-btn",onClick:n.copyContact},{default:l(()=>[h(d,{class:"copy-text"},{default:l(()=>[k("å¤åˆ¶è”ç³»æ–¹å¼")]),_:1})]),_:1},8,["onClick"])]),_:1})):(r(),t(i,{key:0,class:"locked-section"},{default:l(()=>[h(i,{class:"lock-icon"},{default:l(()=>[k("ðŸ”’")]),_:1}),h(d,{class:"lock-text"},{default:l(()=>[k("è”ç³»æ–¹å¼å·²åŠ å¯†")]),_:1}),h(d,{class:"lock-hint"},{default:l(()=>[k("è§£é”åŽå¯æŸ¥çœ‹æäº¤æ–¹è”ç³»æ–¹å¼")]),_:1}),h(i,{class:"unlock-btn",onClick:n.handleUnlock},{default:l(()=>[h(d,{class:"unlock-text"},{default:l(()=>[k("è§£é”è”ç³»æ–¹å¼")]),_:1}),h(d,{class:"unlock-price"},{default:l(()=>[k("ï¼ˆ3ç§¯åˆ†ï¼‰")]),_:1})]),_:1},8,["onClick"])]),_:1}))]),_:1})]),_:1})):(r(),t(i,{key:2,class:"error-container"},{default:l(()=>[h(d,{class:"error-icon"},{default:l(()=>[k("âš ï¸")]),_:1}),h(d,{class:"error-text"},{default:l(()=>[k("èˆ±ä½ä¿¡æ¯ä¸å­˜åœ¨")]),_:1}),h(i,{class:"back-btn",onClick:n.goBack},{default:l(()=>[h(d,{class:"back-text"},{default:l(()=>[k("è¿”å›žé¦–é¡µ")]),_:1})]),_:1},8,["onClick"])]),_:1})),o.showPayModal?(r(),t(i,{key:3,class:"modal-overlay",onClick:n.closeModal},{default:l(()=>[h(i,{class:"modal-content",onClick:s[0]||(s[0]=y(()=>{},["stop"]))},{default:l(()=>[h(i,{class:"modal-header"},{default:l(()=>[h(d,{class:"modal-title"},{default:l(()=>[k("ç¡®è®¤æ”¯ä»˜")]),_:1}),h(i,{class:"modal-close",onClick:n.closeModal},{default:l(()=>[h(d,{class:"close-icon"},{default:l(()=>[k("Ã—")]),_:1})]),_:1},8,["onClick"])]),_:1}),h(i,{class:"modal-body"},{default:l(()=>[h(d,{class:"modal-text"},{default:l(()=>[k("è§£é”è”ç³»æ–¹å¼éœ€æ”¯ä»˜")]),_:1}),h(d,{class:"modal-price"},{default:l(()=>[k("3ç§¯åˆ†")]),_:1}),h(d,{class:"modal-hint"},{default:l(()=>[k("æ”¯ä»˜åŽå¯æŸ¥çœ‹æäº¤æ–¹è”ç³»ä¿¡æ¯")]),_:1})]),_:1}),h(i,{class:"modal-footer"},{default:l(()=>[h(i,{class:"cancel-btn",onClick:n.closeModal},{default:l(()=>[h(d,{class:"cancel-text"},{default:l(()=>[k("å–æ¶ˆ")]),_:1})]),_:1},8,["onClick"]),h(i,{class:"confirm-btn",onClick:n.confirmPay},{default:l(()=>[h(d,{class:"confirm-text"},{default:l(()=>[k("ç¡®è®¤æ”¯ä»˜")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onClick"])):m("",!0)]),_:1})}],["__scopeId","data-v-c6a5b76c"]]);export{g as default};
